<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Camino al Buen Descanso ‚Äî Tinkuy Psicoterap√©utico</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-rose:#f9e0d9;       /* fondo rosado suave */
      --beige:#f6e2c5;         /* beige botones/cards */
      --beige-hover:#f3d7b2;
      --text:#2c3e50;
      --track:#8B4513;
      --accent:#ff5a36;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Montserrat',sans-serif;
      background-color:var(--bg-rose);
      color:var(--text);
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
    }

    /* Contenedor principal con ancho similar al de tus p√°ginas */
    .wrap{
      width:100%;
      max-width:900px;
      padding:20px 16px 40px;
      margin:0 auto;
    }

    h1{
      text-align:center;
      font-size:2rem;
      margin:18px 0 6px;
    }
    .subtitle{
      text-align:center;
      color:#4b4b4b;
      margin-bottom:16px;
      font-size:1rem;
    }

    /* Panel superior (avatar + botones + progreso) */
    .panel{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      background:#fff;
      padding:12px;
      border-radius:14px;
      box-shadow:0 4px 12px rgba(0,0,0,.08);
      margin-bottom:16px;
    }
    .panel-left{
      display:flex; align-items:center; gap:12px; flex-wrap:wrap;
    }
    label{font-weight:600}
    select{
      font-size:1rem;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid #ddd;
      background:#fff;
      cursor:pointer;
    }
    .btns{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    button{
      padding:10px 16px;
      font-weight:600;
      font-size:1rem;
      background:var(--beige);
      border:none;
      border-radius:10px;
      cursor:pointer;
      transition:background .25s ease, transform .05s ease;
    }
    button:hover{ background:var(--beige-hover); }
    button:active{ transform:translateY(1px); }

    /* Progreso */
    .progress{
      margin-left:auto;
      font-weight:700;
      color:#333;
    }

    /* Zona del juego */
    .game-card{
      background:#fff;
      border-radius:16px;
      box-shadow:0 6px 16px rgba(0,0,0,.1);
      padding:14px;
      overflow:hidden;
    }
    .svg-frame{
      width:100%;
      aspect-ratio: 16 / 11; /* mantiene proporci√≥n agradable */
      position:relative;
    }
    svg{ width:100%; height:100%; display:block; }
    .track{ stroke:var(--track); stroke-width:12; fill:none; stroke-linecap:round; }
    .milestone{ fill:#4CAF50; }
    .goal{ fill:#FFD700; }
    .start-end-label{ font-size:22px; }

    /* Avatar como grupo transformable con transici√≥n */
    .player{
      transition: transform .6s ease-in-out;
      pointer-events:none;
    }
    .player text{
      font-size:28px; /* tama√±o del emoji/avatar */
      dominant-baseline: middle;
      text-anchor: middle;
    }

    /* Mensaje */
    .message{
      margin-top:14px;
      background:#fff7f2;
      border:1px solid #ffe4d6;
      border-radius:14px;
      padding:16px;
      line-height:1.65;
      font-size:1rem;
      color:#333;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>El Camino al Buen Descanso üåô</h1>
    <p class="subtitle">Avanza paso a paso y descubre 50 h√°bitos y micro-consejos para dormir mejor.</p>

    <div class="panel">
      <div class="panel-left">
        <label for="avatar">Avatar:</label>
        <select id="avatar">
          <option value="üåô" selected>üåô Luna</option>
          <option value="üò¥">üò¥ Carita dormida</option>
          <option value="üö∂‚Äç‚ôÇÔ∏è">üö∂‚Äç‚ôÇÔ∏è Caminante</option>
          <option value="üêë">üêë Oveja</option>
          <option value="üßë">üßë Persona</option>
          <option value="üêª">üêª Osito</option>
        </select>
      </div>
      <div class="btns">
        <button id="advanceBtn">Avanzar</button>
        <button id="resetBtn">Reiniciar</button>
      </div>
      <div class="progress" id="progress">Paso 1 de 50</div>
    </div>

    <div class="game-card">
      <div class="svg-frame">
        <svg viewBox="0 0 1000 680" preserveAspectRatio="xMidYMid meet" aria-label="Camino serpenteante">
          <!-- Camino serpenteante -->
          <path id="track" class="track"
            d="M 60 630
               C 180 560, 300 700, 420 620
               S 660 540, 780 600
               S 940 560, 920 450
               S 780 360, 640 400
               S 500 440, 380 360
               S 240 280, 160 340
               S 120 420, 220 470
               S 420 540, 600 500
               S 820 420, 860 300
               S 760 180, 620 220
               S 480 260, 360 180
               S 240 120, 160 180
               S 120 260, 220 320
               S 380 380, 540 340
               S 720 280, 800 200
               S 860 120, 780 80
               S 600 60, 480 120
               S 360 180, 260 140
               S 160 100, 100 140
               S 80 220, 140 280
               S 240 360, 360 420
               S 520 500, 640 560
               S 820 620, 940 580" />

          <!-- Hitos cada 5 pasos (visual) -->
          <g id="milestones"></g>

          <!-- Inicio y meta decorativos -->
          <text class="start-end-label" x="60" y="630" dy="28">‚è∞</text>
          <text class="start-end-label" x="940" y="580" dy="-14">üõèÔ∏è‚ú®</text>

          <!-- Avatar -->
          <g id="player" class="player">
            <text id="playerEmoji" x="0" y="0">üåô</text>
          </g>
        </svg>
      </div>

      <div class="message" id="message">
        Haz clic en <strong>Avanzar</strong> para iniciar. Cada paso desbloquea una idea pr√°ctica para mejorar tu sue√±o.
      </div>
    </div>
  </div>

  <script>
    // ====== Configuraci√≥n y utilidades ======
    const TOTAL_STEPS = 50;
    const track = document.getElementById('track');
    const player = document.getElementById('player');
    const playerEmoji = document.getElementById('playerEmoji');
    const progressEl = document.getElementById('progress');
    const messageEl = document.getElementById('message');
    const advanceBtn = document.getElementById('advanceBtn');
    const resetBtn = document.getElementById('resetBtn');
    const avatarSelect = document.getElementById('avatar');
    const milestonesGroup = document.getElementById('milestones');

    // Generar 50 puntos equidistantes a lo largo del path
    const pathLen = track.getTotalLength();
    const points = Array.from({length: TOTAL_STEPS}, (_, i) => {
      const p = track.getPointAtLength((i/(TOTAL_STEPS-1)) * pathLen);
      return { x: p.x, y: p.y };
    });

    // Dibujar marcadores cada 5 pasos
    for (let i = 0; i < TOTAL_STEPS; i++) {
      if (i % 5 === 0 || i === TOTAL_STEPS-1) {
        const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
        c.setAttribute('cx', points[i].x);
        c.setAttribute('cy', points[i].y);
        c.setAttribute('r', i === TOTAL_STEPS-1 ? 10 : 6);
        c.setAttribute('class', i === TOTAL_STEPS-1 ? 'goal' : 'milestone');
        milestonesGroup.appendChild(c);
      }
    }

    // Mensajes psicoeducativos (50)
    const msgs = [
      "Dormir bien fortalece memoria, atenci√≥n y regulaci√≥n emocional. Piensa en el sue√±o como tu aliado diario.",
      "Define un horario de sue√±o constante: misma hora para acostarte y levantarte, incluso los fines de semana.",
      "Tu ritmo circadiano ama la regularidad; respetarlo reduce somnolencia y mejora tu energ√≠a.",
      "Luz por la ma√±ana: abre cortinas o sal al sol 10‚Äì15 min para sincronizar tu reloj biol√≥gico.",
      "Reduce luz intensa por la noche; aten√∫a luces y usa tonos c√°lidos 60‚Äì90 min antes de dormir.",
      "Pantallas fuera 60 min antes: la luz azul retrasa la melatonina y dificulta conciliar el sue√±o.",
      "Si debes usar pantallas de noche, baja el brillo y activa filtros nocturnos.",
      "Crea un ritual: lectura ligera, respiraci√≥n 4-7-8, mindfulness o estiramientos suaves.",
      "Asocia la cama solo con dormir o intimidad; evita trabajar o ver TV ah√≠.",
      "Si pasan 20 min despierto en cama, lev√°ntate y haz algo tranquilo hasta tener sue√±o.",
      "Cuida el ambiente: habitaci√≥n fresca (18‚Äì20¬∞C), oscura y silenciosa favorece sue√±o profundo.",
      "Invierte en una almohada y colch√≥n c√≥modos; tu cuello y espalda lo agradecer√°n.",
      "Bloquea ruido con tapones o ruido blanco; una app o un ventilador pueden ayudar.",
      "La cafe√≠na (caf√©, t√©, bebidas energ√©ticas) impacta hasta 6‚Äì8 horas: ev√≠tala por la tarde/noche.",
      "Nicotina y alcohol alteran la arquitectura del sue√±o: reducen profundidad y fragmentan la noche.",
      "Cena ligera 2‚Äì3 horas antes; evita comidas muy grasas o picantes cerca de dormir.",
      "Hidr√°tate bien en el d√≠a, pero limita l√≠quidos 1‚Äì2 horas antes para no interrumpir la noche.",
      "Haz ejercicio con regularidad; idealmente por la ma√±ana o tarde, no justo antes de dormir.",
      "Exposici√≥n diurna a la luz y movimiento f√≠sico mejoran la presi√≥n de sue√±o nocturna.",
      "Siestas: cortas (10‚Äì20 min) y tempranas. Si te cuesta conciliar por la noche, ev√≠talas.",
      "Gestiona el estr√©s: escribe pendientes, planifica el d√≠a siguiente y libera la mente antes de acostarte.",
      "Prueba respiraci√≥n diafragm√°tica o relajaci√≥n muscular progresiva para soltar tensi√≥n.",
      "Evita revisar el reloj de madrugada; aumenta la ansiedad y el insomnio de rendimiento.",
      "Acepta noches malas ocasionales: no persigas el sue√±o, deja que llegue.",
      "Mant√©n expectativas realistas: la perfecci√≥n del sue√±o no existe; busca consistencia.",
      "Crea se√±ales de inicio: t√© de hierbas, m√∫sica suave o una ducha tibia marcan el cambio.",
      "Asegura exposici√≥n a luz natural al menos 30‚Äì60 min al d√≠a para anclar tu ritmo.",
      "Reduce rumiaci√≥n: anota preocupaciones en un papel y posp√≥n resolverlas al d√≠a siguiente.",
      "Orden y limpieza en el dormitorio: menos est√≠mulos, m√°s calma.",
      "Regula la temperatura: prueba s√°banas transpirables; el calor corporal debe bajar ligeramente.",
      "Evita discusiones intensas o trabajo mental exigente cerca de dormir.",
      "Cuida los fines de semana: no ‚Äúduermas de m√°s‚Äù varias horas; desajusta tu reloj interno.",
      "No uses alcohol como ‚Äúinductor del sue√±o‚Äù: fragmenta y reduce el REM.",
      "Si te desvelas, vuelve al horario normal la noche siguiente; evita largas siestas compensatorias.",
      "Usa una app o diario de sue√±o para detectar patrones y mejoras con tus cambios.",
      "Aromas calmantes (lavanda, manzanilla) pueden formar parte de tu ritual nocturno.",
      "Practica gratitud antes de dormir: 3 cosas buenas del d√≠a reducen activaci√≥n cognitiva.",
      "Evita noticias o contenidos activantes por la noche; elige materiales relajantes.",
      "Limita compromisos nocturnos si afectan tu hora objetivo de acostarte.",
      "Dale tiempo a los cambios: los h√°bitos de sue√±o mejoran con constancia en 2‚Äì4 semanas.",
      "Si compartes cama, acuerden rutinas y condiciones (temperatura, luz, dispositivos).",
      "Mascotas: decide si duermen dentro o fuera del cuarto seg√∫n interrumpan o no tu sue√±o.",
      "Comprueba alergias (√°caros/polvo) si despiertas congestionado: funda anti√°caros ayuda.",
      "Si te despiertas en la noche, mant√©n luces bajas para no ‚Äúdespertar del todo‚Äù al cerebro.",
      "Desconecta notificaciones: modo avi√≥n o ‚Äúno molestar‚Äù desde cierta hora.",
      "Desarrolla una frase calma (‚ÄúPuedo descansar; mi cuerpo sabe dormir‚Äù) para momentos de alerta.",
      "Evita beber mucho alcohol o grandes cenas en reuniones nocturnas.",
      "Integra pausas de relajaci√≥n en el d√≠a para no llegar sobrecargado a la noche.",
      "Celebra micro-progresos: 10‚Äì15 min de mejora sostenida ya es un buen avance.",
      "Busca apoyo profesional si los problemas persisten 3+ meses o hay somnolencia diurna significativa.",
      "¬°Felicidades! Has completado el camino: conserva lo que te funciona y s√© amable contigo en el proceso."
    ];

    let step = 0; // √≠ndice actual (0..49)

    function setPlayerToStep(i){
      const p = points[i];
      player.setAttribute('transform', `translate(${p.x}, ${p.y})`);
      progressEl.textContent = `Paso ${i+1} de ${TOTAL_STEPS}`;
      messageEl.textContent = msgs[i] || "";
    }

    function advance(){
      if (step < TOTAL_STEPS-1){
        step++;
        setPlayerToStep(step);
        if (step === TOTAL_STEPS-1){
          messageEl.innerHTML = msgs[step] + " üåü<br><br><strong>Tip:</strong> guarda esta p√°gina entre tus favoritos y vuelve cuando necesites reforzar h√°bitos.";
        }
      } else {
        // ya en el final
        messageEl.innerHTML = "Ya est√°s en la meta üõèÔ∏è‚ú®. Puedes <strong>Reiniciar</strong> para repasar desde el inicio.";
      }
    }

    function resetGame(){
      step = 0;
      setPlayerToStep(step);
    }

    function changeAvatar(){
      playerEmoji.textContent = avatarSelect.value;
    }

    // Init
    changeAvatar();
    setPlayerToStep(0);
    advanceBtn.addEventListener('click', advance);
    resetBtn.addEventListener('click', resetGame);
    avatarSelect.addEventListener('change', changeAvatar);
  </script>
</body>
</html>
